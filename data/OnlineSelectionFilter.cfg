process L1SKIM = {

  # initialize  MessageLogger
  include "FWCore/MessageService/data/MessageLogger.cfi"
  replace MessageLogger.cout.threshold = "ERROR"
  replace MessageLogger.cerr.default.limit = 10

  source = PoolSource {
    untracked vstring fileNames = {
	'file:PhysVal-DiElectron-Ene10.root'
    }
    untracked int32 maxEvents = 20 
  }

  include "L1Trigger/Configuration/data/L1Emulator.cff"
  include "L1Trigger/L1ExtraFromDigis/data/l1extraParticleMap.cfi"
  
  module osFilter = OnlineSelectionFilter {
    InputTag gtReadoutSource = l1extraParticleMap
  }

  path filterPath = { l1emulator, l1extraParticleMap, osFilter}

  module l1tOutput = PoolOutputModule {
    untracked vstring outputCommands = { 
      "drop *", 
      "keep edmHepMCProduct_*_*_*",
      "keep L1*_*_*_*",
      "keep EcalTrigger*_*_*_*",
      "keep HcalTrigger*_*_*_*",
      "keep *_l1extraParticleMap_*_*",
      "keep *_l1extraParticles_*_*"
    }
    untracked string fileName = "testL1TOutput.root"
  }
  
  module hltOutput = PoolOutputModule {
    untracked vstring outputCommands = { 
      "drop *", 
      "keep edmHepMCProduct_*_*_*",
      "keep *_g4SimHits_*_*",
      "keep *_*_*_L1SKIM",
      "drop Crossing*_*_*_*",
      "drop *_ecalUnsuppressedDigis_*_*",
      "drop EcalTrigger*_*_*_*",
      "drop *CSCTriggerContainer_*_*_*",
      "drop *_dttpgprod_*_*"
    }
    untracked string fileName = "testHLTOutput.root"
    untracked PSet SelectEvents = { vstring SelectEvents = { "filterPath" } }
  }

  endpath l1t = {l1tOutput}
  endpath hlt = {hltOutput}

}
